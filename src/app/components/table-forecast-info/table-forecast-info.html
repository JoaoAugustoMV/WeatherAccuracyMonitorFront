<table mat-table [dataSource]="dataSource">

  <!-- Coluna fixa: ForecastWasMade -->
  <ng-container matColumnDef="forecastWasMade">
    <th mat-header-cell *matHeaderCellDef> Previsões Feita </th>
    <td mat-cell *matCellDef="let row"> {{ row.forecastWasMade }} </td>
  </ng-container>

  <!-- Colunas dinâmicas -->
  @for (column of columnsName; track $index; let colIndex = $index) {
    <ng-container [matColumnDef]="column">
      <th mat-header-cell *matHeaderCellDef>
        {{ column }}
      </th>
      <td mat-cell *matCellDef="let row">

        <!-- Pega a previsão do dia correspondente -->
        @for (card of row.forecastsDayInfoCards; track card.dayCode; let cardIndex = $index) {                    
          @if(colIndex == cardIndex){
            @for (item of card.items; track item.sources) {
              <app-day-forecast-item [item]="item"/>              
            }
          }
        }

      </td>
    </ng-container>
  }

<tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
<tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>


</table>
